angular.module('FilterList',[]).constant('API_URI','/api/dev-open/');angular.module('FilterList').filter('highlight',function($sce){return function(text,phrase){if(phrase)text=text.replace(new RegExp('('+phrase+')','gi'),'<span class="highlighted">$1</span>');return $sce.trustAsHtml(text)}});angular.module('FilterList').controller('FilterListCtrl',function($scope,$http,API_URI){var vm=this;var languageUri=API_URI+'concept/?methods__specification='+language_id+'&distinct=true&limit=0';$http.get(languageUri).success(function(data){vm.items=data.objects;});});$("[data-ajax-link]").click(function(){var $curr_elem=$(this);$.ajax({url:$curr_elem.attr('href'),cache:false,success:function(data){if(data.length<10){$curr_elem.toggleClass('active');var count_elem=$curr_elem.parent().find("[data-counter]");count_elem.text(data);}else{}}});return false;});engine=new Bloodhound({datumTokenizer:function(d){return Bloodhound.tokenizers.whitespace(d.value);},queryTokenizer:Bloodhound.tokenizers.whitespace,remote:{url:'/search_auto/?q=%QUERY',ajax:{beforeSend:function(xhr){},error:function(jqXHR,textStatus,errorThrown){}},filter:function(response){var data=response.results;if(data!=undefined&&data.length>0)
return $.map(data,function(str){return{value:str};});else
return[];}}});engine.initialize();var dom_typeahead=$('[data-typeahead]');dom_typeahead.typeahead(null,{minLength:3,source:engine.ttAdapter()});dom_typeahead.bind("typeahead:selected",function(event,suggestion,dataset_name){$(this).closest("form").submit();});(function(doc,$){$('[title]').tooltip();initClipboard();var isCapableBrowser=('querySelectorAll'in doc&&'addEventListener'in doc&&[].forEach);if(!isCapableBrowser){return;}
function initClipboard(){var selectButtons=doc.querySelectorAll('button.select-btn');var copyButtons=doc.querySelectorAll('button.copy-btn');ZeroClipboard.setDefaults({moviePath:'/static/vendor/zeroclipboard-1.1.7/js/ZeroClipboard.swf'});[].forEach.call(selectButtons,function(button){button.addEventListener('click',function(e){selectText(this.getAttribute('data-select-target'));},false);});var clip=new ZeroClipboard(copyButtons,{});clip.on('complete',function(){this.innerHTML='copied';});return clip;}
function selectText(element){var text=doc.getElementById(element);var range,selection;if(doc.body.createTextRange){range=doc.body.createTextRange();range.moveToElementText(text);range.select();}else if(window.getSelection){selection=window.getSelection();range=doc.createRange();range.selectNodeContents(text);selection.removeAllRanges();selection.addRange(range);}}}(document,window.jQuery));(function(){function initParameterEdit(){var app=angular.module('snippet',[]);app.directive('ngPrism',[function(){return{restrict:'A',scope:{source:'@'},link:function(scope,element,attrs){scope.$watch('source',function(src){if(src){Prism.highlightElement(element.find("code")[0]);}});},template:"<code ng-bind='source'></code>"};}]);}
function newSnippetForm(element){element.find('.ace_editor').remove();var textarea=element.find('textarea[data-editor]');addEditor(textarea)}
var editors={}
var editor_idx=0;function addEditor(wrapper){var dom_text=wrapper.find('[data-editor]');var dom_ace_select=wrapper.find('[data-ace-select]');var editDiv=$('<div>',{'class':dom_text.attr('class')}).insertBefore(dom_text);dom_text.css('visibility','hidden');var editor=ace.edit(editDiv[0]);var dict_name='editor'+editor_idx;editor_idx+=1;editors[dict_name]=editor;editor.getSession().setValue(dom_text.val());var language_select=dom_text.parents('.snippet-editor').find('select');var option=language_select.find('option[selected=selected]');var ace_lang=option.data('ace-language');if(ace_lang){editor.getSession().setMode("ace/mode/"+ace_lang);}
dom_text.data('data-ace',dict_name);language_select.data('data-ace',dict_name);language_select.on('change',function(event){var option=$(this).find('option:selected');var ace_lang=option.data('ace-language');var editor=editors[$(this).data('data-ace')];if(ace_lang){editor.getSession().setMode("ace/mode/"+ace_lang);}});editor.getSession().setValue(dom_text.val());dom_text.closest('form').submit(function(){$('textarea[data-editor]').each(function(){var editor=editors[$(this).data('data-ace')];$(this).text(editor.getSession().getValue());});})}
$('body').delegate('[data-formset-form][data-ace-form]','formAdded',function(){addEditor($(this));});$("[data-formset-dynamic]").formset({animateForms:true});initParameterEdit();})();